# Fusion Starter

Полнофункциональное, готовое к продакшену приложен��е на React с интегрированным Express сервером.

## Содержание

- [Требования](#требования)
- [Установка](#установка)
- [Запуск проекта](#запуск-проекта)
- [Структура проекта](#структура-проекта)
- [Команды](#команды)
- [Документация](#документация)

## Требования

Перед началом работы убедитесь, что установлены:

- **Node.js**: версия 18.x или выше
- **pnpm**: версия 9.x или выше (менеджер пакетов)

### Проверка версий

```bash
node --version      # Должно быть v18.x или выше
pnpm --version      # Должно быть 9.x или выше
```

Если у вас установлен npm вместо pnpm, установите pnpm глобально:

```bash
npm install -g pnpm@10.14.0
```

## Установка

### 1. Клонирование репозитория

```bash
git clone <URL_РЕПОЗИТОРИЯ>
cd <ИМЯ_ПАПКИ>
```

### 2. Установка зависимостей

```bash
pnpm install
```

Это установит все необходимые пакеты для фронтенда и бэкенда.

## Запуск проекта

### Режим разработки

Для запуска проекта в режиме разработки с горячей перезагрузкой (Hot Module Replacement):

```bash
pnpm dev
```

После запуска приложение будет доступно по адресу:
- **Локально**: http://localhost:8080/
- **В сети**: Вывод команды покажет альтернативные адреса

**Особенности режима разработки:**
- Фронтенд и бэкенд работают на одном порту (8080)
- Автоматическая перезагрузка при изменении кода
- Поддержка TypeScript с проверкой типов в реальном времени
- Полные исходные карты (source maps) для отладки

### Режим продакшена

#### Сборка для производства

Соберите приложение для развертывания:

```bash
pnpm build
```

Эта команда в��полняет:
1. `pnpm build:client` - Собирает React SPA в папку `dist/spa`
2. `pnpm build:server` - Собирает Express сервер в папку `dist/server`

#### Запуск собранного приложения

```bash
pnpm start
```

Приложение будет доступно по адресу http://localhost:3000 (или порту, установленному в переменной окружения `PORT`)

## Структура проекта

```
.
├── client/                          # React SPA фронтенд
│   ├── pages/                       # Компоненты страниц (маршруты)
│   │   ├── Index.tsx               # Домашняя страница
│   │   └── ...другие страницы
│   ├── components/                  # Переиспользуемые компоненты
│   │   ├── ui/                     # Библиотека UI компонентов (Radix UI)
│   │   ├── layout/                 # Компоненты макета (Header, Footer)
│   │   ├── cards/                  # Карточки (Article, News, Podcast)
│   │   ├── features/               # Компоненты функций
│   │   └── widgets/                # Виджеты (Knowledge Hub, FAQ)
│   ├── entities/                    # Типы и интерфейсы данных
│   ├── hooks/                       # Пользовательские хуки React
│   ├── lib/                         # Утилиты и вспомогательные функции
│   ├── App.tsx                      # Главный компонент с маршрутизацией
│   └── global.css                   # Глобальные стили и темы
│
├── server/                          # Express API бэкенд
│   ├── index.ts                     # Конфигурация Express и маршруты API
│   ├── node-build.ts               # Точка входа для production сервера
│   └── routes/                      # Обработчики API маршрутов
│
├── shared/                          # Общие типы для клиента и сервера
│   └── api.ts                       # Интерфейсы API
│
├── public/                          # Ста��ические файлы
│   └── data/                        # JSON данные (FAQ, статьи, новости)
│
├── netlify/functions/               # Netlify Serverless Functions
│   └── api.ts                       # API функция для Netlify
│
├── package.json                     # Зависимости и скрипты
├── tsconfig.json                    # Конфигурация TypeScript
├── vite.config.ts                   # Конфигурация Vite (разработка)
├── vite.config.server.ts           # Конфигурация Vite (сборка сервера)
├── tailwind.config.ts              # Конфигурация Tailwind CSS
├── postcss.config.js               # Конфигурация PostCSS
└── netlify.toml                     # Конфигурация развертывания Netlify
```

## Команды

### Основные команды

| Команда | Описание |
|---------|----------|
| `pnpm dev` | Запуск в режиме разработки с горячей перезагрузкой |
| `pnpm build` | Сборка для продакшена (клиент + сервер) |
| `pnpm build:client` | Сборка только фронтенда |
| `pnpm build:server` | Сборка только бэкенда |
| `pnpm start` | Запуск собранного приложения в продакшене |
| `pnpm test` | Запуск тестов (Vitest) |
| `pnpm typecheck` | Проверка типов TypeScript |
| `pnpm format.fix` | Форматирование кода (Prettier) |

### Примеры использования

```bash
# Развертывание на локальной машине
pnpm install
pnpm dev

# Сборка и тестирование перед развертыванием
pnpm build
pnpm test
pnpm typecheck

# Запуск в продакшене
pnpm start
```

## Переменные окружения

Создайте файл `.env` в корне проекта для установки переменных окружения:

```bash
# Port для production сервера (по умолчанию 3000)
PORT=3000

# Пользовательские переменные
PING_MESSAGE=пинг
```

**Важно:** Никогда не коммитьте файл `.env` в репозиторий. Используйте `.env.example` для документирования требуемых переменных.

## Технологический стек

### Фронтенд
- **React 18** - UI библиотека
- **React Router 6** - Маршрутизация (SPA режим)
- **TypeScript** - Типизированный JavaScript
- **Vite** - Быстрый сборщик
- **Tailwind CSS 3** - Утилиты для стилизации
- **Radix UI** - Доступные UI компоненты
- **Lucide React** - SVG иконки

### Бэкенд
- **Express 5** - Веб-фреймворк
- **TypeScript** - Типизированный JavaScript
- **CORS** - Поддержка кроссорджинных запросов
- **Zod** - Валидация данных

### Разработка и тестирование
- **Vitest** - Фреймворк для тестирования
- **Prettier** - Форматирование кода
- **TSConfig** - Конфигурация TypeScript

## Документация

Подробную информацию о работе с проектом можно найти в файле `AGENTS.md`, который содержит:
- Рекомендации по структуре про��кта
- Примеры создания новых маршрутов
- Примеры создания новых страниц
- Лучшие практики

## Развертывание

### Netlify

Проект готов к развертыванию на Netlify:

1. Свяжите репозиторий с Netlify
2. Netlify автоматически обнаружит конфигурацию в `netlify.toml`
3. При каждом пушу в ветку автоматически произойдет сборка и развертывание

### Локальное развертывание

```bash
# Соберите приложение
pnpm build

# Запустите production сервер
pnpm start

# Приложение будет доступно на http://localhost:3000
```

## Решение проблем

### Ошибка 403 при запуске

Если вы видите ошибку "403 Restricted" при запуске `pnpm dev`:
1. Убедитесь, что используется правильная версия Node.js (v18+)
2. Удалите папку `node_modules` и переустановите зависимости:
   ```bash
   rm -rf node_modules
   pnpm install
   ```
3. Перезапустите dev сервер:
   ```bash
   pnpm dev
   ```

### Порт уже используется

Если порт 8080 занят другим приложением:
```bash
# Найдите процесс, используемый портом (Linux/macOS)
lsof -i :8080

# Найдите процесс (Windows)
netstat -ano | findstr :8080

# Используйте другой порт, отредактировав vite.config.ts
```

## Поддержка

Если у вас возникли проблемы:
1. Проверьте версии Node.js и pnpm
2. Убедитесь, что все зависимости установлены: `pnpm install`
3. Очистите кэш и переустановите: `rm -rf node_modules && pnpm install`
4. Посмотрите логи в консоли для подробной информации об ошибке

---

**Версия проекта:** Fusion Starter  
**Менеджер пакетов:** pnpm 10.14.0+  
**Node.js:** 18.x или выше
